#!groovy

properties([
        parameters([string(name: 'LIB_VERSION', defaultValue: 'master', description: 'Branch name of pipeline library to use')]),
        pipelineTriggers([cron('15 01 * * *')])
])

library "Infrastructure@${params.LIB_VERSION}"

String product = "div"

String component = "pfe"

def type = "nodejs"


withNightlyPipeline(type,product,component) {
    environment {
        env.SAUCE_ACCESS_KEY = credentials('COSMOSDB_TOKEN_KEY')
    }

    echo "sauce labs access key ${env.SAUCE_ACCESS_KEY}"


    env.TEST_URL = 'https://www.apply-divorce.service.gov.uk'

    enableCrossBrowserTest()
    enablePerformanceTest()
}

